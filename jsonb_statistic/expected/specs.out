CREATE EXTENSION jsonb_statistic;
CREATE TABLE jsonb_test(x jsonb);
INSERT INTO jsonb_test VALUES
('{
  "key": "value",
  "key_1": {
    "key_2": {
      "key_4": false,
      "key_5": true,
      "key_6": 4.5,
      "key_7": 10000
    }
  }
}'),
('{
  "key": "value",
  "key_1": {
    "key_2": "value"
  }
}');
SELECT generate_statistic('{{"jsonb_test", "x"}}');
 generate_statistic 
--------------------
 
(1 row)

SELECT * from jsonb_statistics;
                                             table_name                                              |                                                       column_name                                                       |       key_path        |  value  | value_type | values_count 
-----------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------+-----------------------+---------+------------+--------------
 {"key": "value", "key_1": {"key_2": {"key_4": false, "key_5": true, "key_6": 4.5, "key_7": 10000}}} | ("{""key"": ""value"", ""key_1"": {""key_2"": {""key_4"": false, ""key_5"": true, ""key_6"": 4.5, ""key_7"": 10000}}}") | ->key                 | "value" | string     |            1
 {"key": "value", "key_1": {"key_2": {"key_4": false, "key_5": true, "key_6": 4.5, "key_7": 10000}}} | ("{""key"": ""value"", ""key_1"": {""key_2"": {""key_4"": false, ""key_5"": true, ""key_6"": 4.5, ""key_7"": 10000}}}") | ->key_1->key_2->key_4 | false   | boolean    |            1
 {"key": "value", "key_1": {"key_2": {"key_4": false, "key_5": true, "key_6": 4.5, "key_7": 10000}}} | ("{""key"": ""value"", ""key_1"": {""key_2"": {""key_4"": false, ""key_5"": true, ""key_6"": 4.5, ""key_7"": 10000}}}") | ->key_1->key_2->key_5 | true    | boolean    |            1
 {"key": "value", "key_1": {"key_2": {"key_4": false, "key_5": true, "key_6": 4.5, "key_7": 10000}}} | ("{""key"": ""value"", ""key_1"": {""key_2"": {""key_4"": false, ""key_5"": true, ""key_6"": 4.5, ""key_7"": 10000}}}") | ->key_1->key_2->key_6 | 4.5     | number     |            1
 {"key": "value", "key_1": {"key_2": {"key_4": false, "key_5": true, "key_6": 4.5, "key_7": 10000}}} | ("{""key"": ""value"", ""key_1"": {""key_2"": {""key_4"": false, ""key_5"": true, ""key_6"": 4.5, ""key_7"": 10000}}}") | ->key_1->key_2->key_7 | 10000   | number     |            1
 {"key": "value", "key_1": {"key_2": "value"}}                                                       | ("{""key"": ""value"", ""key_1"": {""key_2"": ""value""}}")                                                             | ->key                 | "value" | string     |            1
 {"key": "value", "key_1": {"key_2": "value"}}                                                       | ("{""key"": ""value"", ""key_1"": {""key_2"": ""value""}}")                                                             | ->key_1->key_2        | "value" | string     |            1
(7 rows)

DROP TABLE jsonb_test;
DROP EXTENSION jsonb_statistic;
